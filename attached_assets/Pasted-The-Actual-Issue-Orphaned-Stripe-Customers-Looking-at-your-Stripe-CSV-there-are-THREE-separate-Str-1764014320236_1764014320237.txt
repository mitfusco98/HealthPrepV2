The Actual Issue: Orphaned Stripe Customers
Looking at your Stripe CSV, there are THREE separate Stripe customer records for "Default 3" variations:

Row 2 (most recent): mitchfuse98@test.org ‚Üí org_id: 7 ‚Üí Created Nov 19, 00:12
Row 5: mitchfusillo@gmail.com ‚Üí org_id: 6 ‚Üí Created Nov 18, 22:29
Row 16 (oldest): default3@test.com ‚Üí org_id: 16 ‚Üí Created Nov 17, 21:53
None of these organizations exist in your database anymore, but the Stripe customer records still do.

üö® The Broken Flow
Here's what's happening:

1. User submits signup ‚Üí Organization created (org_id: 16)
2. Stripe customer created ‚Üí Linked to org_id: 16
3. User doesn't complete checkout / Organization gets deleted for testing
4. ‚ùå Stripe customer NEVER gets deleted (orphaned)
5. User tries again with same/similar email
6. System checks: "This email exists in Stripe!" ‚Üí Rejects as duplicate
7. Even though the organization doesn't exist anymore

üìã Prompts for the Main Health Prep App Agent
1. Identify Where Email Validation Happens
Show me where the /api/signup endpoint checks for duplicate emails. Is it checking the organizations table, the Stripe customer records, or both? The issue is that deleted organizations leave orphaned Stripe customers.

2. Understand the Stripe Customer Lifecycle
When an organization is deleted, what happens to its associated Stripe customer? Is there any cleanup logic? Show me the organization deletion code and check if it deletes the Stripe customer too.

3. Fix the Duplicate Email Check Logic
The email duplicate check should ONLY look at active organizations in the database, NOT at Stripe customer records. If checking Stripe, it must also verify the organization still exists. Update this validation logic.

4. Implement Stripe Cleanup
Add cleanup logic: when an organization is deleted (or marked inactive), the associated Stripe customer should also be deleted or archived. This prevents orphaned customer records.

5. Handle the "Invalid Sign Up Session" Error
After Stripe checkout completes, what matches the session back to the organization? Check if it's using org_id from metadata. If org_id 6 or 7 don't exist in the database, that would cause "invalid sign up session" errors.

6. Immediate Fix - Manual Cleanup
As a temporary fix, delete these orphaned Stripe customers: cus_TRslPCOjNfZUsK (org 7), cus_TRr7PAXZY2ARMe (org 6), cus_TRTJXPnzycrr2H (org 16). Then test signup with a fresh email.

üéØ Root Cause Summary
The marketing website is working perfectly. The problem is in the Health Prep app's:

Email validation - checking Stripe instead of (or in addition to) the database
Data synchronization - organizations get deleted but Stripe customers don't
Stripe session handling - trying to link completed checkouts to non-existent organizations
This is a classic data consistency issue between your app database and Stripe. You need proper cascading deletes or lifecycle management.