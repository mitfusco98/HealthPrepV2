<div class="row">
    <div class="col-lg-8">
        <div class="card">
            <div class="card-header">
                <h5 class="card-title mb-0">
                    <i class="fas fa-sliders-h me-2"></i>Prep Sheet Data Cutoffs
                </h5>
            </div>
            <div class="card-body">
                <p class="text-muted mb-4">
                    Configure how far back the system should look for medical data when generating prep sheets.
                    This helps focus on relevant, recent information.
                </p>
                
                <form method="POST" action="{{ url_for('screening_list', tab='checklist') }}">
                    <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
                    
                    <div class="row">
                        <div class="col-md-6">
                            <div class="mb-3">
                                <label for="labs_cutoff_months" class="form-label">
                                    <i class="fas fa-flask me-1"></i>Laboratory Results
                                </label>
                                <div class="input-group">
                                    <input type="number" 
                                           class="form-control" 
                                           id="labs_cutoff_months" 
                                           name="labs_cutoff_months" 
                                           min="1" 
                                           max="60" 
                                           value="{{ checklist_settings.labs_cutoff_months }}" 
                                           required>
                                    <span class="input-group-text">months</span>
                                </div>
                                <div class="form-text">Show lab results from the last N months</div>
                            </div>
                        </div>
                        
                        <div class="col-md-6">
                            <div class="mb-3">
                                <label for="imaging_cutoff_months" class="form-label">
                                    <i class="fas fa-x-ray me-1"></i>Imaging Studies
                                </label>
                                <div class="input-group">
                                    <input type="number" 
                                           class="form-control" 
                                           id="imaging_cutoff_months" 
                                           name="imaging_cutoff_months" 
                                           min="1" 
                                           max="60" 
                                           value="{{ checklist_settings.imaging_cutoff_months }}" 
                                           required>
                                    <span class="input-group-text">months</span>
                                </div>
                                <div class="form-text">Show imaging studies from the last N months</div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="row">
                        <div class="col-md-6">
                            <div class="mb-3">
                                <label for="consults_cutoff_months" class="form-label">
                                    <i class="fas fa-user-md me-1"></i>Specialist Consults
                                </label>
                                <div class="input-group">
                                    <input type="number" 
                                           class="form-control" 
                                           id="consults_cutoff_months" 
                                           name="consults_cutoff_months" 
                                           min="1" 
                                           max="60" 
                                           value="{{ checklist_settings.consults_cutoff_months }}" 
                                           required>
                                    <span class="input-group-text">months</span>
                                </div>
                                <div class="form-text">Show consult reports from the last N months</div>
                            </div>
                        </div>
                        
                        <div class="col-md-6">
                            <div class="mb-3">
                                <label for="hospital_cutoff_months" class="form-label">
                                    <i class="fas fa-hospital me-1"></i>Hospital Visits
                                </label>
                                <div class="input-group">
                                    <input type="number" 
                                           class="form-control" 
                                           id="hospital_cutoff_months" 
                                           name="hospital_cutoff_months" 
                                           min="1" 
                                           max="60" 
                                           value="{{ checklist_settings.hospital_cutoff_months }}" 
                                           required>
                                    <span class="input-group-text">months</span>
                                </div>
                                <div class="form-text">Show hospital visits from the last N months</div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="d-flex justify-content-end">
                        <button type="submit" class="btn btn-primary">
                            <i class="fas fa-save me-1"></i>Save Settings
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>
    
    <div class="col-lg-4">
        <!-- Current Settings Summary -->
        <div class="card">
            <div class="card-header">
                <h6 class="card-title mb-0">
                    <i class="fas fa-info-circle me-1"></i>Current Settings
                </h6>
            </div>
            <div class="card-body">
                <div class="mb-2">
                    <strong>Labs:</strong> Last {{ checklist_settings.labs_cutoff_months }} months<br>
                    <small class="text-muted">
                        Since {{ (moment().subtract(checklist_settings.labs_cutoff_months, 'months')).format('MMM YYYY') }}
                    </small>
                </div>
                
                <div class="mb-2">
                    <strong>Imaging:</strong> Last {{ checklist_settings.imaging_cutoff_months }} months<br>
                    <small class="text-muted">
                        Since {{ (moment().subtract(checklist_settings.imaging_cutoff_months, 'months')).format('MMM YYYY') }}
                    </small>
                </div>
                
                <div class="mb-2">
                    <strong>Consults:</strong> Last {{ checklist_settings.consults_cutoff_months }} months<br>
                    <small class="text-muted">
                        Since {{ (moment().subtract(checklist_settings.consults_cutoff_months, 'months')).format('MMM YYYY') }}
                    </small>
                </div>
                
                <div class="mb-2">
                    <strong>Hospital:</strong> Last {{ checklist_settings.hospital_cutoff_months }} months<br>
                    <small class="text-muted">
                        Since {{ (moment().subtract(checklist_settings.hospital_cutoff_months, 'months')).format('MMM YYYY') }}
                    </small>
                </div>
            </div>
        </div>
        
        <!-- Recommended Settings -->
        <div class="card mt-3">
            <div class="card-header">
                <h6 class="card-title mb-0">
                    <i class="fas fa-lightbulb me-1"></i>Recommendations
                </h6>
            </div>
            <div class="card-body">
                <ul class="list-unstyled small">
                    <li class="mb-2">
                        <strong>Labs:</strong> 6-12 months for routine results, 3-6 months for chronic conditions
                    </li>
                    <li class="mb-2">
                        <strong>Imaging:</strong> 12-24 months for most studies, longer for stable findings
                    </li>
                    <li class="mb-2">
                        <strong>Consults:</strong> 6-12 months for specialist recommendations
                    </li>
                    <li class="mb-2">
                        <strong>Hospital:</strong> 12 months for admission summaries and discharge planning
                    </li>
                </ul>
            </div>
        </div>
        
        <!-- Impact Notice -->
        <div class="card mt-3 border-warning">
            <div class="card-body">
                <div class="text-warning">
                    <i class="fas fa-exclamation-triangle me-2"></i>
                    <strong>Note:</strong> Changes will affect all future prep sheets. 
                    Shorter timeframes reduce clutter, longer timeframes provide more history.
                </div>
            </div>
        </div>
    </div>
</div>
